/*! turtle 0.9.0 */
(function(){"use strict";var a,b,c,d,e=function(){function a(a){this.game=a,this.defaultStyle={fontFamily:"Uni",fontSize:16}}return a.prototype.addAnimationsToSprite=function(a,b,c){for(var d,e,f,g=0,h=b.length;h>g;g+=1)d=c*g,e=d+c,f=_.range(d,e),a.animations.add(b[g],f,12.5,!0)},a.prototype.addText=function(a,b,c,d){var e,f;f={};for(e in this.defaultStyle)this.defaultStyle.hasOwnProperty(e)&&(f[e]=this.defaultStyle[e]);for(e in d)d.hasOwnProperty(e)&&(f[e]=d[e]);return f.font=f.fontSize+"px "+f.fontFamily,delete f.fontSize,delete f.fontFamily,this.game.add.text(16*a,8*b,c,f)},a}(),f={bubble:{name:"bubble",effects:[{jumpHeightIncrease:-100}],duration:4e3},candy:{name:"candy",effects:[{addShell:!0}]},chili:{name:"chili",effects:[{speedIncrease:100}],duration:4e3},ice:{name:"ice",effects:[{speedIncrease:-150}],duration:2e3},salad:{name:"salad",effects:[]},strawberry:{name:"strawberry",effects:[{healthIncrease:1}]}},g={id:"1-1",name:"Welcome to the world",backgroundMusic:"happy",type:"forest",goal:{position:{x:144,y:8},height:8},goodies:[{type:"candy",positions:[{x:39,y:8}]},{type:"chili",positions:[{x:80,y:6},{x:114,y:4}]},{type:"salad",positions:[{x:54,y:4}]},{type:"strawberry",positions:[{x:10,y:6}]}],hazardousWater:[{start:{x:24,y:9},length:2}],hazardousTerrain:[{start:{x:36,y:8},length:1}],minions:[{type:"caterpillar",positions:[{x:68,y:8},{x:72,y:8},{x:76,y:8},{x:100,y:8}]},{type:"worm",positions:[{x:125,y:8}]}],platforms:[{start:{x:9,y:7},length:3},{start:{x:49,y:6},length:4},{start:{x:53,y:5},length:3},{start:{x:56,y:6},length:3},{start:{x:67,y:7},length:2},{start:{x:108,y:7},length:2},{start:{x:110,y:6},length:3},{start:{x:113,y:5},length:3}],player:{jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},h={id:"1-2",name:"We need to go deeper",backgroundMusic:"happy",type:"forest",goal:{position:{x:144,y:8},height:8},goodies:[{type:"candy",positions:[{x:51,y:8}]},{type:"ice",positions:[{x:79,y:8},{x:134,y:4}]},{type:"salad",positions:[{x:19,y:4},{x:65,y:8}]},{type:"strawberry",positions:[{x:106,y:8}]}],hazardousWater:[{start:{x:62,y:9},length:2},{start:{x:67,y:9},length:7},{start:{x:65,y:9},length:2}],hazardousTerrain:[{start:{x:25,y:8},length:1},{start:{x:49,y:8},length:1},{start:{x:53,y:8},length:1},{start:{x:115,y:8},length:1}],minions:[{type:"caterpillar",positions:[{x:77,y:8},{x:82,y:8},{x:130,y:8}]}],platforms:[{start:{x:11,y:7},length:2},{start:{x:14,y:6},length:2},{start:{x:18,y:5},length:2},{start:{x:68,y:7},length:2},{start:{x:72,y:6},length:2},{start:{x:92,y:5},length:2},{start:{x:95,y:6},length:2},{start:{x:129,y:7},length:2},{start:{x:131,y:6},length:2},{start:{x:133,y:5},length:5}],slidingTerrain:[{start:{x:28,y:9},length:10},{start:{x:112,y:9},length:15}],player:{jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},i={id:"1-3",name:"Happy Birthday!",backgroundMusic:"happy",type:"forest",goal:{position:{x:144,y:8},height:8},boss:{type:"stork",position:{x:128,y:4}},goodies:[{type:"candy",positions:[{x:45,y:8},{x:74,y:2}]},{type:"chili",positions:[{x:46,y:5}]},{type:"ice",positions:[{x:113,y:8}]},{type:"salad",positions:[{x:63,y:6}]},{type:"strawberry",positions:[{x:36,y:5}]}],hazardousWater:[{start:{x:8,y:9},length:6},{start:{x:61,y:9},length:18}],hazardousTerrain:[{start:{x:20,y:8},length:4},{start:{x:26,y:8},length:4},{start:{x:45,y:4},length:1},{start:{x:85,y:8},length:1},{start:{x:90,y:8},length:1},{start:{x:95,y:8},length:1},{start:{x:100,y:8},length:1},{start:{x:105,y:7},length:3}],minions:[{type:"caterpillar",positions:[{x:47,y:8},{x:54,y:8},{x:92,y:8},{x:96,y:8},{x:113,y:8}]}],platforms:[{start:{x:11,y:6},length:2},{start:{x:62,y:7},length:2},{start:{x:66,y:6},length:2},{start:{x:70,y:5},length:2},{start:{x:77,y:4},length:2},{start:{x:124,y:6},length:3}],player:{jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200},slidingTerrain:[{start:{x:18,y:9},length:12}]},j={id:"2-1",name:"Under the sea",backgroundMusic:"sea",type:"sea",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:68,y:6}]},{type:"candy",positions:[{x:78,y:1},{x:92,y:5}]},{type:"chili",positions:[{x:42,y:1}]},{type:"ice",positions:[{x:60,y:1},{x:104,y:1}]},{type:"strawberry",positions:[{x:44,y:1},{x:113,y:8}]}],minions:[{type:"jellyfish",positions:[{x:90,y:7},{x:105,y:7},{x:130,y:7},{x:135,y:7}]},{type:"pufferfish",positions:[{x:40,y:9},{x:60,y:8},{x:78,y:5},{x:110,y:1},{x:113,y:1}]}],player:{hasShell:!0,isUnderWater:!0,jumpVelocity:-200,walkDrag:800,position:{x:1,y:7}},physics:{gravity:400}},k={id:"2-2",name:"Message in a bottle",backgroundMusic:"sea",type:"sea",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:12,y:7},{x:76,y:1},{x:102,y:2}]},{type:"candy",positions:[{x:33,y:8},{x:83,y:1}]},{type:"chili",positions:[{x:8,y:4},{x:23,y:8},{x:36,y:1},{x:65,y:8},{x:69,y:7},{x:76,y:8},{x:110,y:3}]},{type:"ice",positions:[{x:50,y:8},{x:91,y:2},{x:116,y:2}]}],hazardousTerrain:[{start:{x:17,y:2},length:2},{start:{x:31,y:6},length:1},{start:{x:52,y:2},length:2},{start:{x:107,y:8},length:2},{start:{x:114,y:8},length:2}],player:{hasShell:!0,isUnderWater:!0,jumpVelocity:-200,walkDrag:800,position:{x:1,y:7}},physics:{gravity:400}},l={id:"2-3",name:"Finding Peemo",backgroundMusic:"sea",type:"sea",boss:{type:"lanternfish",position:{x:140,y:4}},goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:29,y:3},{x:47,y:7}]},{type:"candy",positions:[{x:69,y:8}]},{type:"chili",positions:[{x:20,y:6},{x:34,y:1},{x:77,y:8},{x:80,y:2},{x:91,y:5},{x:96,y:8},{x:98,y:2},{x:101,y:5},{x:110,y:2}]},{type:"ice",positions:[{x:88,y:8}]},{type:"strawberry",positions:[{x:57,y:4},{x:61,y:5},{x:78,y:5},{x:80,y:4},{x:82,y:5},{x:111,y:6},{x:112,y:8},{x:137,y:5}]}],hazardousTerrain:[{start:{x:1,y:8},length:6},{start:{x:81,y:8},length:4},{start:{x:98,y:8},length:4}],minions:[{type:"jellyfish",positions:[{x:52,y:7},{x:53,y:7},{x:54,y:7},{x:55,y:7},{x:56,y:7},{x:122,y:7},{x:128,y:7},{x:129,y:7}]}],player:{hasShell:!0,isUnderWater:!0,jumpVelocity:-200,walkDrag:800,position:{x:2,y:3}},physics:{gravity:400}},m={id:"3-1",name:"Winter Wonderland",backgroundMusic:"ice",type:"winter",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:54,y:8},{x:130,y:4}]},{type:"candy",positions:[{x:26,y:2}]},{type:"chili",positions:[{x:92,y:1}]},{type:"ice",positions:[{x:54,y:4}]},{type:"strawberry",positions:[{x:41,y:8},{x:118,y:8}]}],hazardousTerrain:[{start:{x:19,y:8},length:1},{start:{x:81,y:8},length:3}],hazardousWater:[{start:{x:47,y:9},length:2},{start:{x:68,y:9},length:2},{start:{x:74,y:9},length:3},{start:{x:85,y:7},length:8},{start:{x:129,y:9},length:3}],minions:[{type:"penguin",positions:[{x:14,y:8},{x:53,y:8},{x:55,y:8},{x:96,y:8},{x:104,y:8},{x:122,y:8}]}],platforms:[{start:{x:18,y:4},length:4},{start:{x:25,y:3},length:4},{start:{x:52,y:5},length:5},{start:{x:85,y:5},length:2},{start:{x:87,y:3},length:3},{start:{x:91,y:3},length:3},{start:{x:95,y:4},length:3},{start:{x:108,y:6},length:3},{start:{x:129,y:5},length:3}],player:{isSanta:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},n={id:"3-2",name:"Bad Santa",backgroundMusic:"ice",type:"winter",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:51,y:1}]},{type:"candy",positions:[{x:20,y:3}]},{type:"chili",positions:[{x:69,y:4}]},{type:"ice",positions:[{x:27,y:3}]},{type:"strawberry",positions:[{x:62,y:1},{x:94,y:3}]}],hazardousTerrain:[{start:{x:47,y:7},length:1},{start:{x:74,y:7},length:2},{start:{x:106,y:8},length:3}],hazardousWater:[{start:{x:38,y:6},length:6},{start:{x:86,y:8},length:3}],minions:[{type:"penguin",positions:[{x:29,y:8},{x:52,y:8},{x:55,y:8},{x:67,y:8},{x:77,y:8},{x:82,y:8},{x:123,y:8},{x:128,y:8}]}],platforms:[{start:{x:19,y:4},length:4},{start:{x:27,y:4},length:2},{start:{x:39,y:4},length:2},{start:{x:43,y:3},length:2},{start:{x:47,y:2},length:2},{start:{x:52,y:4},length:3},{start:{x:62,y:2},length:2},{start:{x:66,y:5},length:7},{start:{x:77,y:3},length:2},{start:{x:81,y:5},length:3},{start:{x:87,y:5},length:2},{start:{x:93,y:4},length:2},{start:{x:112,y:5},length:3},{start:{x:121,y:6},length:3}],player:{isSanta:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200},slidingTerrain:[{start:{x:92,y:9},length:2},{start:{x:98,y:9},length:11}]},o={id:"3-3",name:"Winter Wonderland",backgroundMusic:"ice",type:"winter",boss:{type:"polarbaer",position:{x:140,y:2}},goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:21,y:8},{x:96,y:1}]},{type:"candy",positions:[{x:30,y:8},{x:104,y:1}]},{type:"chili",positions:[{x:50,y:3}]},{type:"strawberry",positions:[{x:41,y:1},{x:124,y:8}]}],hazardousWater:[{start:{x:22,y:9},length:4},{start:{x:35,y:9},length:3},{start:{x:64,y:9},length:3}],hazardousTerrain:[{start:{x:32,y:8},length:1},{start:{x:72,y:5},length:1},{start:{x:86,y:8},length:1},{start:{x:92,y:8},length:2},{start:{x:100,y:7},length:1}],minions:[{type:"penguin",positions:[{x:15,y:8},{x:50,y:5},{x:52,y:5},{x:53,y:5},{x:70,y:5},{x:100,y:5},{x:102,y:5},{x:105,y:5},{x:120,y:8},{x:117,y:8},{x:124,y:8}]}],platforms:[{start:{x:19,y:6},length:2},{start:{x:22,y:4},length:2},{start:{x:27,y:3},length:4},{start:{x:36,y:3},length:2},{start:{x:40,y:3},length:2},{start:{x:85,y:4},length:2},{start:{x:90,y:3},length:2},{start:{x:95,y:3},length:3},{start:{x:103,y:3},length:2}],player:{isSanta:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200},slidingTerrain:[{start:{x:19,y:9},length:3},{start:{x:26,y:9},length:9},{start:{x:74,y:9},length:6},{start:{x:83,y:9},length:13}]},p={id:"4-1",name:"Horse with no name",backgroundMusic:"desert",type:"desert",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:37,y:2},{x:82,y:7},{x:108,y:8},{x:118,y:8},{x:128,y:8}]},{type:"chili",positions:[{x:10,y:8},{x:51,y:9},{x:64,y:8}]},{type:"strawberry",positions:[{x:47,y:1},{x:104,y:1}]}],hazardousWater:[{start:{x:39,y:9},length:4},{start:{x:61,y:9},length:2},{start:{x:65,y:9},length:2}],hazardousTerrain:[{start:{x:11,y:9},length:5},{start:{x:69,y:8},length:2},{start:{x:72,y:8},length:7},{start:{x:80,y:5},length:1},{start:{x:83,y:6},length:1},{start:{x:84,y:8},length:3},{start:{x:89,y:8},length:4}],minions:[{type:"scorpion",positions:[{x:96,y:8},{x:99,y:8},{x:103,y:8},{x:108,y:8},{x:117,y:8},{x:127,y:8}]}],platforms:[{start:{x:35,y:5},length:3},{start:{x:46,y:3},length:3},{start:{x:104,y:2},length:2}],player:{hasShell:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},q={id:"4-2",name:"This was never a good idea",backgroundMusic:"desert",type:"desert",goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:49,y:0},{x:125,y:5}]},{type:"chili",positions:[{x:15,y:3},{x:120,y:2}]},{type:"strawberry",positions:[{x:108,y:1}]}],hazardousWater:[{start:{x:28,y:9},length:9},{start:{x:63,y:9},length:9},{start:{x:75,y:9},length:3},{start:{x:80,y:9},length:6},{start:{x:122,y:9},length:13}],hazardousTerrain:[{start:{x:48,y:7},length:1},{start:{x:49,y:8},length:3},{start:{x:55,y:8},length:5},{start:{x:88,y:8},length:4},{start:{x:94,y:8},length:3},{start:{x:97,y:6},length:1},{start:{x:100,y:7},length:1},{start:{x:101,y:8},length:3}],minions:[{type:"scorpion",positions:[{x:40,y:8},{x:106,y:5}]}],platforms:[{start:{x:11,y:5},length:3},{start:{x:14,y:4},length:2},{start:{x:119,y:3},length:2}],slidingTerrain:[{start:{x:10,y:9},length:18},{start:{x:70,y:6},length:5}],player:{hasShell:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},r={id:"4-3",name:"U can't remember your name",backgroundMusic:"desert",type:"desert",boss:{type:"snake",position:{x:130,y:2}},goal:{position:{x:144,y:8},height:8},goodies:[{type:"bubble",positions:[{x:36,y:8},{x:120,y:3}]},{type:"chili",positions:[{x:61,y:2},{x:87,y:7}]},{type:"strawberry",positions:[{x:51,y:1},{x:112,y:7}]}],hazardousWater:[{start:{x:25,y:9},length:3},{start:{x:60,y:9},length:5},{start:{x:71,y:9},length:7},{start:{x:81,y:9},length:6},{start:{x:90,y:9},length:4},{start:{x:95,y:9},length:1}],hazardousTerrain:[{start:{x:96,y:8}}],minions:[{type:"scorpion",positions:[{x:19,y:3},{x:45,y:8},{x:49,y:8},{x:109,y:8}]}],platforms:[{start:{x:8,y:8},length:2},{start:{x:11,y:5},length:2}],player:{hasShell:!0,jumpVelocity:-400,walkDrag:800,position:{x:1,y:7}},physics:{gravity:1200}},s=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"caterpillar"),this.hasHitPlayer=!1,this.walkVelocity=80,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],4),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-this.walkVelocity,this.scale.x*=-1,this.anchor.setTo(.5,1),this.facing=this.body.facing,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),t=function(){function a(a,b,c,d,e){var f=this;Phaser.Sprite.call(this,a,32*b,32*c,d),this.dring=a.add.audio("dring",.3),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.allowGravity=!1,this.body.immovable=!0,this.name=d,this.effects=e,this.originalX=b,this.originalY=c,this.events.onKilled.add(function(){f.dring.play()})}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a}(),u=function(){function a(a,b,d){var e;Phaser.Sprite.call(this,a,32*b,32*d,"jellyfish"),this.hasHitPlayer=!1,this.jumpVelocity=100,this.walkVelocity=100,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],6),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-1*this.walkVelocity,this.body.velocity.y=-1*this.jumpVelocity,this.anchor.setTo(.5,1),this.facing=this.body.facing,e=this,setInterval(function(){e.body.velocity.y=-1*e.jumpVelocity},1e3),a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),v=function(){function a(a,b,d){var e;e=this,Phaser.Sprite.call(this,a,32*b,32*d,"lanternfish"),this.hasHitPlayer=!1,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],6),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.immovable=!0,this.body.bounce.y=1,setInterval(function(){e.body.velocity.y=-200},1e3),a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a}(),w=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"penguin"),this.hasHitPlayer=!1,this.walkVelocity=80,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],4),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-this.walkVelocity,this.scale.x*=-1,this.anchor.setTo(.5,1),this.facing=this.body.facing,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),x=function(){function a(a,b,d,e,f,g,h,i){Phaser.Sprite.call(this,a,32*b,32*d,"player"),this.aua=a.add.audio("aua",.3),this.gulp=a.add.audio("gulp",.3),this.wahoo=a.add.audio("wahoo",.3),this.whoop=a.add.audio("whoop",.3),this.woo=a.add.audio("woo",.3),this.damageInterval=null,this.currentJumpCount=0,this.deathAnimation=null,this.facing=Phaser.RIGHT,this.hasShell=!1,this.health=3,this.isCheering=!1,this.isDying=!1,this.isInHazardousTerrain=!1,this.isInHazardousWater=!1,this.isOnSlidingTerrain=!1,this.isSanta=!1,this.isUnderWater=!1,this.jumpVelocity=f,this.maximumJumpCount=2,this.walkDrag=e,this.walkVelocity=200,g&&(this.hasShell=g),i&&(this.isSanta=i),h&&(this.isUnderWater=h),this.animationNames=["walk-right","walk-left","walk-right-naked","walk-left-naked","eat-right","eat-right-naked","jump-right","jump-right-naked","jump-left","jump-left-naked","eat-left","eat-left-naked","die-right","die-left","die-right-naked","die-left-naked","cheer","swim-right","swim-left","eat-right-underwater","eat-left-underwater","cheer-underwater","die-left-underwater","die-right-underwater","walk-right-santa","walk-left-santa","eat-right-santa","eat-left-santa","jump-right-santa","jump-left-santa","die-right-santa","die-left-santa","cheer-santa"],this.framesPerAnimation=10,c.addAnimationsToSprite(this,this.animationNames,this.framesPerAnimation),this.animations.play(this.isSanta?"walk-right-santa":this.isUnderWater?"swim-right":this.hasShell?"walk-right":"walk-right-naked"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.drag.x=this.walkDrag,this.body.collideWorldBounds=!0,this.events.onKilled.add(this.die,this),a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b,c,d,e,f;a=this.animations.currentAnim.name,c=0===a.indexOf("eat-"),c||(e="-naked",b=a.indexOf(e,0),d=-1!==b,this.hasShell&&d&&(f=a.substring(0,b),this.animations.play(f))),(this.body.facing===Phaser.LEFT&&this.facing!==Phaser.LEFT||this.body.facing===Phaser.RIGHT&&this.facing!==Phaser.RIGHT)&&(this.facing=this.body.facing),0===this.body.velocity.y&&(this.currentJumpCount=0)},a.prototype.addEffect=function(a,b,c){var d;d=this,d[a]+=b,c&&setTimeout(function(){d[a]-=b},c)},a.prototype.addBooleanEffect=function(a,b,c){var d;d=this,d[a]=b,c&&setTimeout(function(){d[a]=!b},c)},a.prototype.cheer=function(){var a,b;a="cheer",b=this,this.isCheering||(this.isCheering=!0,this.body.collideWorldBounds=!1,this.body.velocity.x=this.walkVelocity,this.body.drag.x=b.walkVelocity,this.isSanta?a+="-santa":this.isUnderWater&&(a+="-underwater"),setTimeout(function(){b.animations.play(a),setTimeout(function(){b.animations.play(b.isUnderWater?"swim-right":b.isSanta?"walk-right-santa":b.hasShell?"walk-right":"walk-right-naked"),b.body.velocity.x=b.walkVelocity/2,b.body.drag.x=0},3750)},1e3))},a.prototype.die=function(){var a=this.animationNames.indexOf(this.deathAnimation)*this.framesPerAnimation+this.framesPerAnimation-1;this.visible=!0,this.frame=a},a.prototype.eatGoody=function(a){if(!this.isCheering&&!this.isDying){var b,c,d,e,g;b="eat-",this.gulp.play(),g=this.animations.currentAnim.name,b+=this.facing===Phaser.LEFT?"left":"right",this.isSanta?b+="-santa":this.isUnderWater&&(b+="-underwater"),this.hasShell||(b+="-naked"),this.animations.play(b,null,!1),e=f[a.name],d=e.effects;for(var h=0,i=d.length;i>h;h+=1)c=d[h],c.addShell&&this.addBooleanEffect("hasShell",c.addShell,e.duration),c.healthIncrease&&this.addEffect("health",c.healthIncrease,e.duration),c.speedIncrease&&this.addEffect("walkVelocity",c.speedIncrease,e.duration),c.jumpHeightIncrease&&this.addEffect("jumpVelocity",c.jumpHeightIncrease,e.duration);var j=0===g.indexOf("walk")||0===g.indexOf("swim"),k=this;j&&this.events.onAnimationComplete.add(function(){k.animations.play(g)})}},a.prototype.enterHazardousTerrain=function(){this.isInHazardousTerrain||(this.isInHazardousTerrain=!0,this.takeDamage(1),this.setDamageInterval())},a.prototype.leaveHazardousTerrain=function(){this.isInHazardousTerrain&&(this.isInHazardousTerrain=!1,this.clearDamageInterval())},a.prototype.enterHazardousWater=function(){this.isInHazardousWater||(this.isInHazardousWater=!0,this.takeDamage(1),this.setDamageInterval())},a.prototype.leaveHazardousWater=function(){this.isInHazardousWater&&(this.isInHazardousWater=!1,this.clearDamageInterval())},a.prototype.clearDamageInterval=function(){clearInterval(this.damageInterval)},a.prototype.setDamageInterval=function(){var a;a=this,this.damageInterval=setInterval(function(){a.takeDamage(1)},1e3)},a.prototype.takeDamage=function(a){this.isCheering||this.isDying||(this.health-a<=0?(this.isDying=!0,this.body.immovable=!0,this.health=0,this.deathAnimation="die-",this.deathAnimation+=this.facing===Phaser.LEFT?"left":"right",this.isSanta?this.deathAnimation+="-santa":this.isUnderWater&&(this.deathAnimation+="-underwater"),this.hasShell||(this.deathAnimation+="-naked"),this.animations.play(this.deathAnimation,null,!1,!0)):(this.aua.play(),this.damage(a)))},a.prototype.jump=function(){if(!this.isCheering&&!this.isDying)if(this.isUnderWater)this.whoop.play("",.2,1,!1),this.body.velocity.y=this.jumpVelocity;else{var a,b,c,d;a="jump-",c=this,d=0===this.animations.currentAnim.name.indexOf("walk"),d&&(b=this.animations.currentAnim),this.currentJumpCount<this.maximumJumpCount&&(this.animations.stop(),0===this.currentJumpCount?this.woo.play():1===this.currentJumpCount&&this.wahoo.play(),this.body.velocity.y=this.jumpVelocity,this.currentJumpCount+=1,a+=this.facing===Phaser.LEFT?"left":"right",this.isSanta?a+="-santa":this.hasShell||(a+="-naked"),this.animations.play(a,null,!1),b&&this.events.onAnimationComplete.add(function(){c.animations.play(b.name)}))}},a.prototype.moveLeft=function(){this.isCheering||this.isDying||(this.body.velocity.x=-1*this.walkVelocity)},a.prototype.moveRight=function(){this.isCheering||this.isDying||(this.body.velocity.x=this.walkVelocity)},a.prototype.resetSlide=function(){this.isOnSlidingTerrain&&(this.isOnSlidingTerrain=!1,this.body.drag.x=this.walkDrag)},a.prototype.slide=function(){this.isOnSlidingTerrain||(this.isOnSlidingTerrain=!0,this.body.drag.x=this.walkDrag/5)},a.prototype.turnLeft=function(){if(!this.isCheering&&!this.isDying){var a;a=this.isUnderWater?"swim":"walk",a+="-left",this.isSanta?a+="-santa":this.hasShell||(a+="-naked"),this.animations.play(a),this.facing=Phaser.LEFT}},a.prototype.turnRight=function(){if(!this.isCheering&&!this.isDying){var a;a=this.isUnderWater?"swim":"walk",a+="-right",this.isSanta?a+="-santa":this.hasShell||(a+="-naked"),this.animations.play(a),this.facing=Phaser.RIGHT}},a}(),y=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"polarbaer"),this.hasHitPlayer=!1,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["rawr"],9),this.animations.play("rawr"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.immovable=!0,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.hit=function(a){if(a.hasShell)this.body.touching.up&&(this.plop.play(),this.kill());else if(!this.hasHitPlayer){a.takeDamage(1),this.hasHitPlayer=!0;var b=this;setTimeout(function(){b.hasHitPlayer=!1},500)}},a}(),z=function(){function a(a,b,d){var e;Phaser.Sprite.call(this,a,32*b,32*d,"pufferfish"),this.hasHitPlayer=!1,this.jumpVelocity=103,this.walkVelocity=120,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],6),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.collideWorldBounds=!0,this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-1*this.walkVelocity,this.body.velocity.y=-1*this.jumpVelocity,this.scale.x=-1,this.anchor.setTo(.5,1),this.facing=this.body.facing,e=this,setInterval(function(){e.body.velocity.y=-1*e.jumpVelocity},500),a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),A=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"scorpion"),this.hasHitPlayer=!1,this.walkVelocity=120,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],4),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-this.walkVelocity,this.scale.x*=-1,this.anchor.setTo(.5,1),this.facing=this.body.facing,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),B=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"snake"),this.hasHitPlayer=!1,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["slither"],15),this.animations.play("slither"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.immovable=!0,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.hit=function(a){if(a.hasShell)this.body.touching.up&&(this.plop.play(),this.kill());else if(!this.hasHitPlayer){a.takeDamage(1),this.hasHitPlayer=!0;var b=this;setTimeout(function(){b.hasHitPlayer=!1},500)}},a}(),C=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"stork"),this.hasHitPlayer=!1,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["peck"],8),this.animations.play("peck"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.immovable=!0,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.hit=function(a){if(a.hasShell)this.body.touching.up&&(this.plop.play(),this.kill());else if(!this.hasHitPlayer){a.takeDamage(1),this.hasHitPlayer=!0;var b=this;setTimeout(function(){b.hasHitPlayer=!1},500)}},a}(),D=function(){function a(a,b,d){Phaser.Sprite.call(this,a,32*b,32*d,"worm"),this.hasHitPlayer=!1,this.walkVelocity=120,this.plop=a.add.audio("plop",1.75),c.addAnimationsToSprite(this,["default"],4),this.animations.play("default"),a.physics.enable(this,Phaser.Physics.ARCADE),this.body.bounce.x=1,this.body.immovable=!0,this.body.velocity.x=-this.walkVelocity,this.scale.x*=-1,this.anchor.setTo(.5,1),this.facing=this.body.facing,a.add.existing(this)}return a.prototype=Object.create(Phaser.Sprite.prototype),a.prototype.constructor=a,a.prototype.update=function(){var a,b;a=Phaser.LEFT,b=Phaser.RIGHT,this.body.facing===a&&this.facing!==a?(this.facing=a,this.turnAround()):this.body.facing===b&&this.facing!==b&&(this.facing=b,this.turnAround())},a.prototype.hit=function(a){var b;this.body.touching.up?(this.plop.play(),this.kill()):this.hasHitPlayer||(a.takeDamage(1),this.hasHitPlayer=!0,b=this,setTimeout(function(){b.hasHitPlayer=!1},500))},a.prototype.turnAround=function(){this.scale.x*=-1},a}(),E={preload:function(){this.load.spritesheet("player","/img/sprites/turtle.png",32,64)},create:function(){var b,d,e,f,g;b=this.game,g=this,this.fx=b.add.audio("gameover"),this.fx.addMarker("gameover",0,24,1,!0),this.fx.play("gameover"),this.stage.backgroundColor=a.colors.gray,c.addText(4,4,"GAME COMPLETE",{fontSize:32,fill:a.colors.red}),c.addText(4,9,"That. Was. AWESOME!"),e=new x(this.game,7,8,0),e.animations.play("cheer"),d=c.addText(.5,1,"← Menu"),d.inputEnabled=!0,d.events.onInputUp.add(function(){g.fx.pause("gameover"),b.state.start("menu")}),f=c.addText(8,28,"→ I WANT TO GO AGAIN!"),f.inputEnabled=!0,f.events.onInputUp.add(function(){g.fx.pause("gameover"),localStorage.setItem("turtle",JSON.stringify({currentLevel:0})),b.state.start("play")})}},F={fx:null,create:function(){var d,e;this.stage.backgroundColor=a.colors.lightGreen,this.fx=b.add.audio("menu"),this.fx.addMarker("menu",0,12,1,!0),this.fx.play("menu"),e=c.addText(.5,1,"← Menu"),e.inputEnabled=!0;var f=this;e.events.onInputUp.add(function(){f.fx.pause("menu"),b.state.start("menu")}),d=c.addText(3,6,"This game was created by:\n· Astrid Wühr\n· Dominik Habersack\n· Judith Steigemann\n· Miriam Mayer")}},G={fx:null,preload:function(){this.load.spritesheet("player","/img/sprites/turtle.png",32,64)},create:function(){var b,d,e,f=this.game;this.fx=f.add.audio("menu"),this.fx.addMarker("menu",0,12,1,!0),this.fx.play("menu"),this.stage.backgroundColor=a.colors.lightYellow,c.addText(4,4,"TURTLE",{fontSize:32,fill:a.colors.green}),c.addText(4,8,"A fun little game about a fun little turtle."),e=c.addText(3,12,"→ Play"),e.inputEnabled=!0;var g=this;e.events.onInputUp.add(function(){g.fx.pause("menu"),f.state.start("play")}),b=c.addText(3,14,"→ Imprint"),b.inputEnabled=!0,b.events.onInputUp.add(function(){g.fx.pause("menu"),f.state.start("imprint")}),d=new x(this.game,7,8,0)}},H={clouds:null,currentLevel:null,fx:null,goal:null,goodies:null,hasRestartedLevel:null,hazardousTerrain:null,hazardousWater:null,isLevelComplete:null,isShowingCompleteMessage:null,levelNameLabel:null,label:null,layer:null,level:null,lifeGroup:null,minions:null,backgroundMusic:null,platforms:null,player:null,slidingTerrain:null,snake:null,stork:null,tilemap:null,preload:function(){var c,d,e,f;c=a.goodies;for(d in c)c.hasOwnProperty(d)&&this.load.image(d,"/img/goodies/"+d+".png");b.load.audio("aua","music/aua.mp3"),b.load.audio("backgroundmusic","music/backgroundmusic.mp3"),b.load.audio("dring","music/dring.mp3"),b.load.audio("gameover","music/gameover.mp3"),b.load.audio("gulp","music/gulp.mp3"),b.load.audio("plop","music/plop.mp3"),b.load.audio("wahoo","music/wahoo.mp3"),b.load.audio("whoop","music/whoop.mp3"),b.load.audio("woo","music/woo.mp3"),b.load.image("desert-tiles","/img/tiles/desert.png"),b.load.image("forest-tiles","/img/tiles/forest.png"),b.load.image("sea-tiles","/img/tiles/sea.png"),b.load.image("winter-tiles","/img/tiles/winter.png"),b.load.image("life","/img/images/life.png"),b.load.spritesheet("lanternfish","/img/sprites/lanternfish.png",80,80),b.load.spritesheet("caterpillar","/img/sprites/caterpillar.png",48,16),b.load.spritesheet("jellyfish","/img/sprites/jellyfish.png",32,48),b.load.spritesheet("penguin","/img/sprites/penguin.png",32,28),b.load.spritesheet("player","/img/sprites/turtle.png",32,64),b.load.spritesheet("polarbaer","/img/sprites/polarbaer.png",72,72),b.load.spritesheet("pufferfish","/img/sprites/pufferfish.png",32,32),b.load.spritesheet("scorpion","/img/sprites/scorpion.png",32,18),b.load.spritesheet("snake","/img/sprites/snake.png",82,80),b.load.spritesheet("stork","/img/sprites/stork.png",144,132),b.load.spritesheet("worm","/img/sprites/worm.png",48,16),b.load.spritesheet("desert-spritesheet","/img/tiles/desert.png",32,32),b.load.spritesheet("forest-spritesheet","/img/tiles/forest.png",32,32),b.load.spritesheet("sea-spritesheet","/img/tiles/sea.png",32,32),b.load.spritesheet("winter-spritesheet","/img/tiles/winter.png",32,32),f=["1-1","1-2","1-3","2-1","2-2","2-3","3-1","3-2","3-3","4-1","4-2","4-3"];
for(var g=0,h=f.length;h>g;g+=1)e=f[g],b.load.tilemap(e+"-tilemap","/img/tiles/"+e+".json",null,Phaser.Tilemap.TILED_JSON)},create:function(){this.fx=b.add.audio("backgroundmusic"),this.fx.addMarker("happy",0,16,3,!0),this.fx.addMarker("sea",18,16,2,!0),this.fx.addMarker("ice",70,16,2.5,!0),this.fx.addMarker("desert",52,8,2.5,!0),this.fx.addMarker("final",63.5,7,1,!1),this.dying=b.add.audio("dying",.3),localStorage.getItem("turtle")||localStorage.setItem("turtle",JSON.stringify({currentLevel:0})),this.startLevel()},update:function(){var a,c,d,e;a=this.lifeGroup,e=this.player.health,this.checkBossCollisions(),this.checkMinionCollisions(),this.checkPlayerCollisions(),e>=0&&(e<a.length?a.getAt(e).destroy():e>a.length&&(d=this.stage.bounds.width-32*e,c=b.add.sprite(d,16,"life"),a.addAt(c,a.length))),this.isLevelComplete||this.checkKeys()},checkKeys:function(){var a;a=this.input.keyboard.createCursorKeys(),a.left.isDown&&this.player.moveLeft(),a.right.isDown&&this.player.moveRight()},checkBossCollisions:function(){if(this.boss){var a;a=this.game.physics.arcade,a.collide(this.boss,this.layer),a.collide(this.boss,this.platforms)}},checkMinionCollisions:function(){var a;a=this.game.physics.arcade,a.collide(this.minions,this.layer),a.collide(this.minions,this.platforms)},checkPlayerCollisions:function(){var a,b;a=this.game.physics.arcade,b=this,a.collide(this.player,this.boss,function(a,c){c.hit(a),a.health<=0&&b.restartLevel()}),a.overlap(this.player,this.goal,function(a){return b.isLevelComplete=!0,a.cheer(),b.fx.stop(),b.fx.play("final"),b.showCompleteMessage(),a.checkWorldBounds=!0,!1}),a.collide(this.player,this.goodies,function(a,c){var d;a.eatGoody(c),c.kill(),d=f[c.name].duration,d&&setTimeout(function(){b.goodies.add(new t(b.game,c.originalX,c.originalY,c.name))},d)});var c=a.overlap(this.player,this.hazardousTerrain,function(a){a.enterHazardousTerrain(),a.health<=0&&b.restartLevel()});c||this.player.leaveHazardousTerrain();var d=a.overlap(this.player,this.hazardousWater,function(a){a.enterHazardousWater(),a.health<=0&&b.restartLevel()});d||this.player.leaveHazardousWater(),a.collide(this.player,this.layer,function(a){a.resetSlide()}),a.collide(this.player,this.minions,function(a,c){c.hit(a),a.health<=0&&b.restartLevel()}),a.collide(this.player,this.platforms,function(a){a.resetSlide()}),a.collide(this.player,this.slidingTerrain,function(a){a.slide()})},initializeBeforePlayer:function(){this.initializeGoal(),this.initializeHazardousTerrain(),this.initializeHazardousWater(),this.initializePhysics(),this.initializePlatforms(),this.initializeSlidingTerrain()},initializeAfterPlayer:function(){this.initializeBoss(),this.initializeCamera(),this.initializeClouds(),this.initializeGoodies(),this.initializeHealthBar(),this.initializeKeyboard(),this.initializeLabels(),this.initializeMinions(),this.initializeTitle(),this.isLevelComplete=!1},initializeBoss:function(){this.level.boss&&("stork"===this.level.boss.type?this.boss=new C(this.game,this.level.boss.position.x,this.level.boss.position.y):"lanternfish"===this.level.boss.type?this.boss=new v(this.game,this.level.boss.position.x,this.level.boss.position.y):"snake"===this.level.boss.type?this.boss=new B(this.game,this.level.boss.position.x,this.level.boss.position.y):"polarbaer"===this.level.boss.type&&(this.boss=new y(this.game,this.level.boss.position.x,this.level.boss.position.y)))},initializeCamera:function(){this.game.camera.follow(this.player)},initializeGoal:function(){var a,b,c;a=this.level.goal,this.goal=this.game.add.group(),this.goal.enableBody=!0,this.goal.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0;d<a.height-1;d+=1)b=this.goal.create(32*a.position.x,32*(a.position.y-d),this.level.type+"-spritesheet",11),this.game.physics.enable(b,Phaser.Physics.ARCADE),b.body.allowGravity=!1,b.body.immovable=!0;c=this.goal.create(32*a.position.x,32*(a.position.y-a.height+1),this.level.type+"-spritesheet",7),this.game.physics.enable(c,Phaser.Physics.ARCADE),c.body.allowGravity=!1,c.body.immovable=!0},initializeClouds:function(){this.clouds=this.game.add.group(),this.clouds.enableBody=!0,this.clouds.physicsBodyType=Phaser.Physics.ARCADE;for(var a=0,b=8;b>a;a+=1)this.addCloud(32*_.random(0,this.world.bounds.width/32))},initializeGoodies:function(){if(this.level.goodies){var a,b,c;this.goodies=this.game.add.group(),this.goodies.enableBody=!0,this.goodies.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0,e=this.level.goodies.length;e>d;d+=1){a=this.level.goodies[d],c=a.positions;for(var f=0,g=c.length;g>f;f+=1)b=c[f],this.goodies.add(new t(this.game,b.x,b.y,a.type))}}},initializeMinions:function(){if(this.level.minions){var a,b,c,d;this.minions=this.game.add.group();for(var e=0,f=this.level.minions.length;f>e;e+=1){b=this.level.minions[e],d=b.positions;for(var g=0,h=d.length;h>g;g+=1){switch(c=d[g],b.type){case"caterpillar":a=new s(this.game,c.x,c.y);break;case"jellyfish":a=new u(this.game,c.x,c.y);break;case"penguin":a=new w(this.game,c.x,c.y);break;case"pufferfish":a=new z(this.game,c.x,c.y);break;case"scorpion":a=new A(this.game,c.x,c.y);break;case"worm":a=new D(this.game,c.x,c.y)}this.minions.add(a)}}}},initializeHazardousTerrain:function(){if(this.level.hazardousTerrain){var a,b,c;this.hazardousTerrain=this.game.add.group(),this.hazardousTerrain.enableBody=!0,this.hazardousTerrain.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0,e=this.level.hazardousTerrain.length;e>d;d+=1){a=this.level.hazardousTerrain[d],c=a.start;for(var f=0;f<a.length;f+=1)b=this.hazardousTerrain.create(32*(c.x+f),32*c.y,this.level.type+"-spritesheet",14),this.game.physics.enable(b,Phaser.Physics.ARCADE),b.body.allowGravity=!1,b.body.checkCollision.left=!1,b.body.checkCollision.right=!1,b.body.checkCollision.down=!1,b.body.immovable=!0}}},initializeHazardousWater:function(){if(this.level.hazardousWater){var a,b,c;this.hazardousWater=this.game.add.group(),this.hazardousWater.enableBody=!0,this.hazardousWater.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0,e=this.level.hazardousWater.length;e>d;d+=1){a=this.level.hazardousWater[d],c=a.start;for(var f=0;f<a.length;f+=1)b=this.hazardousWater.create(32*(c.x+f),32*c.y,this.level.type+"-spritesheet",15),this.game.physics.enable(b,Phaser.Physics.ARCADE),b.body.allowGravity=!1,b.body.checkCollision.left=!1,b.body.checkCollision.right=!1,b.body.checkCollision.down=!1,b.body.immovable=!0}}},initializeHealthBar:function(){this.lifeGroup=b.add.group(),this.lifeGroup.fixedToCamera=!0;for(var a=0;a<this.player.health;a+=1)this.lifeGroup.create(this.stage.bounds.width-32*(a+1),16,"life")},initializeKeyboard:function(){var a;a=this.input.keyboard.createCursorKeys(),this.input.keyboard.addKeyCapture([a.up,a.down,a.Left,a.right,Phaser.Keyboard.SPACEBAR]);var c=b.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);c.onDown.add(this.player.jump,this.player),a.right.onDown.add(this.player.turnRight,this.player),a.left.onDown.add(this.player.turnLeft,this.player)},initializeLabels:function(){var a,d=this;a=c.addText(1,1,"Menu"),a.fixedToCamera=!0,a.inputEnabled=!0,a.events.onInputUp.add(function(){d.fx.stop(),b.state.start("menu")})},initializePlatforms:function(){if(this.level.platforms){var a,b,c;this.platforms=this.game.add.group(),this.platforms.enableBody=!0,this.platforms.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0,e=this.level.platforms.length;e>d;d+=1){a=this.level.platforms[d],c=a.start;for(var f=0,g=a.length;g>f;f+=1){var h=4;f>0&&(h=5),f+1===g&&(h=6),b=this.platforms.create(32*(c.x+f),32*c.y,this.level.type+"-spritesheet",h),this.game.physics.enable(b,Phaser.Physics.ARCADE),b.body.allowGravity=!1,b.body.checkCollision.left=!1,b.body.checkCollision.right=!1,b.body.checkCollision.down=!1,b.body.immovable=!0}}}},initializePhysics:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=this.level.physics.gravity,this.game.time.deltaCap=.02},initializeSlidingTerrain:function(){if(this.level.slidingTerrain){var a,b,c;this.slidingTerrain=this.game.add.group(),this.slidingTerrain.enableBody=!0,this.slidingTerrain.physicsBodyType=Phaser.Physics.ARCADE;for(var d=0,e=this.level.slidingTerrain.length;e>d;d+=1){a=this.level.slidingTerrain[d],c=a.start;for(var f=0;f<a.length;f+=1)b=this.slidingTerrain.create(32*(c.x+f),32*c.y,this.level.type+"-spritesheet",10),this.game.physics.enable(b,Phaser.Physics.ARCADE),b.body.allowGravity=!1,b.body.checkCollision.left=!1,b.body.checkCollision.right=!1,b.body.checkCollision.down=!1,b.body.immovable=!0}}},initializeTitle:function(){this.levelNameLabel=c.addText(1,4,this.level.id+": "+this.level.name,{fill:a.colors.gray})},restartLevel:function(){var a;a=this,this.hasRestartedLevel||(setTimeout(function(){a.fx.pause(),a.dying.play(),b.state.restart()},2e3),this.hasRestartedLevel=!0)},startLevel:function(){var c,d;c=JSON.parse(localStorage.getItem("turtle")).currentLevel,this.hasRestartedLevel=!1,this.boss&&this.boss.destroy(),this.clouds&&this.clouds.destroy(),this.goal&&this.goal.destroy(),this.goodies&&this.goodies.destroy(),this.hazardousTerrain&&this.hazardousTerrain.destroy(),this.hazardousWater&&this.hazardousWater.destroy(),this.label&&this.label.destroy(),this.layer&&this.layer.destroy(),this.levelNameLabel&&this.levelNameLabel.destroy(),this.lifeGroup&&this.lifeGroup.destroy(),this.minions&&this.minions.destroy(),this.platforms&&this.platforms.destroy(),this.tilemap&&this.tilemap.destroy(),this.isLevelComplete=!1,this.isShowingCompleteMessage=!1,this.level=a.levels[c],this.stage.backgroundColor=a.colors.lightBlue,this.fx.play(this.level.backgroundMusic,!0),this.tilemap=this.game.add.tilemap(this.level.id+"-tilemap"),this.tilemap.addTilesetImage(this.level.type+"-tiles"),this.layer=this.tilemap.createLayer("layer-1"),this.layer.resizeWorld(),this.initializeBeforePlayer(),d=this.level.player,this.player=new x(this.game,d.position.x,d.position.y,d.walkDrag,d.jumpVelocity,d.hasShell,d.isUnderWater,d.isSanta),this.player.checkWorldBounds=!1;var e=this;this.player.events.onOutOfBounds.add(function(){c+=1,localStorage.setItem("turtle",JSON.stringify({currentLevel:c})),c<a.levels.length?e.startLevel():(localStorage.setItem("turtle",JSON.stringify({currentLevel:0})),b.state.start("game-complete"))}),this.tilemap.setCollision([9,10]),this.initializeAfterPlayer()},addCloud:function(a){var b,c=this;"undefined"==typeof a&&(a=this.world.bounds.width),b=this.clouds.create(a,32*_.random(1,3),this.level.type+"-spritesheet",0),b.body.velocity.x=-1*_.random(1,2)*32,b.body.allowGravity=!1,b.checkWorldBounds=!0,b.events.onKilled.add(function(){c.addCloud()}),b.outOfBoundsKill=!0},showCompleteMessage:function(){this.isShowingCompleteMessage||(this.label=c.addText(2,8,"Congratulations!",{fill:a.colors.lightYellow,fontSize:48}),this.label.fixedToCamera=!0,this.isShowingCompleteMessage=!0)}},I={preload:function(){this.ready=!1,this.load.onLoadComplete.addOnce(this.onLoadComplete,this),b.load.audio("aua","music/aua.mp3"),b.load.audio("backgroundmusic","music/backgroundmusic.mp3"),b.load.audio("dring","music/dring.mp3"),b.load.audio("dying","music/dying.mp3"),b.load.audio("gameover","music/gameover.mp3"),b.load.audio("gulp","music/gulp.mp3"),b.load.audio("menu","music/menu.mp3"),b.load.spritesheet("player","/img/sprites/turtle.png",32,64)},create:function(){b.scale.maxWidth=960,b.scale.maxHeight=640,b.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,b.scale.setShowAll(),b.scale.refresh()},update:function(){this.ready&&this.game.state.start("menu")},onLoadComplete:function(){this.ready=!0}},J=function(){function a(){this.colors={gray:"#bcbcbc",lightBlue:"#0078f8",blue:"#0058f8",purple:"#6844fc",magenta:"#d800cc",red:"#e40058",green:"#00a800",lightGreen:"#00b800",lightYellow:"#d8F878"},this.goodies=f,this.levels=[g,h,i,j,k,l,m,n,o,p,q,r]}return a}();a=new J,b=new Phaser.Game(480,320,Phaser.AUTO,"turtle",null,!1,!1),c=new e(b),d={"game-complete":E,imprint:F,menu:G,play:H,preload:I};for(var K in d)d.hasOwnProperty(K)&&b.state.add(K,d[K]);b.state.start("preload")}).call(this);